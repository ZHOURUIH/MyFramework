打包是通过项目内的一个打包工具来执行,具体代码是GameReleaseWindow.cs
其引用代码的继承关系如下
						  ->PlatformWindows
						  ->PlatformAndroid
PlatformBase->PlatformInfo->PlatforIOS
						  ->PlatforMacOS
						  ->PlatforWebGL
						  
PlatformBase中是所有平台所有项目打包的通用步骤
PlatformInfo中是具体项目自身的一些特有逻辑,比如根据项目情况不同编写自己的上传逻辑
其他平台类型的派生是编写各个平台自己的逻辑,包括调用平台的打包方法,特定平台的特殊逻辑等

以打包安卓apk为例
需要提前确认项目已经切换到了安卓平台
点击顶部的 游戏菜单->发布Android版本,这时会出现一个打包界面
能够看到整个有5个checkbox

自动生成打包版本号
检查版本号是否正确
测试客户端
启用热更
自动上传版本号

1.自动生成打包版本号.
就是根据打包热更版本还是全量版本来自动生成小版本号自增或者大版本号自增的版本号.
假设当前版本号是0.1.1,这里三个部分分别表示,
项目状态版本号(0表示非公开测试版本,1表示内测版,2表示公开测试版,这个其实在项目里的意义不大,完全就是被当作大版本号的一个部分)
大版本号,大版本号改变时表示需要更新整包
小版本号,大版本号一致,仅小版本号不一致时,表示只需要热更新
在打包热更新打包时,会仅自增小版本号,比如将0.1.1,自动更新为0.1.2
在整包打包时,会自增大版本号,且小版本号会重置为1,比如将0.1.2自动更新为0.2.1

2.检查版本号是否正确.
打包热更新时会检查新的打包版本号是否仅比远端的版本号的小版本号要高
打包整包时会检查新的打包版本号是否比远端的版本号的大版本号要高

3.测试客户端
勾选后会自动打包为development,并且添加TEST宏

4.启用热更
打包时会添加ENABLE_HOTFIX宏

5.自动上传版本号
勾选后在上传完所有资源文件到远端资源服务器后,会将远端版本号更新为最新的,这时所有的客户端在启动时就会检测到最新的版本号.
由于存在商店审核机制,在正常上线后,一般都不会勾选
具体何时勾选,情况如下
(1).开发期间,每次打包都勾选.
(2),上线期间,热更新时,每次打包都勾选
(3),上线期间,整包更新时,不勾选,商店审核完毕后再手动点击上传版本号

5个打包按钮:
热更新,打包AB+热更dll+上传:先打包AssetBundle,然后打包热更新的dll,再将所有资源上传到资源服务器(需要热更时,大部分情况下点这个按钮就行)
热更新,热更dll+上传:打包热更新的dll,再将所有资源上传到资源服务器,这个需要确保AB是已经提前打包过的
热更新,热更dll:仅打包热更新的dll.
大版本更新,打包AB+打包程序+上传:先打包AssetBundle,然后打包程序,再将所有资源上传到资源服务器(需要整包更新时,大部分情况下点这个按钮就行)
大版本更新,打包程序+上传:然后打包程序,再将所有资源上传到资源服务器,也是需要确保AB已经提前打包过的
大版本更新,打包程序:仅打包程序.

其他按钮:
ProjectSettings:打开Unity的ProijectSettings界面
还原宏定义:根据代码中写的宏定义,将ProijectSettings中的宏还原
上传版本号:手动更新远端版本号
更新AssetBundle:手动打包AssetBundle,跟菜单项中的Pack AssetBundle作用一样
上传测试资源/上传正式资源:手动将资源上传到资源服务器上,将StreamingAsset中指定平台的文件上传
测试打包过程:仅执行打包操作,且不执行HybridCLR热更的打包,只是用于验证打包流程有没有报错
导出安卓工程:仅限于安卓,会将项目导出为一个安卓工程,用于查看某些安卓打包时的奇怪错误

上架渠道:根据代码设置,添加对应渠道的宏,以及生成的文件名会带渠道的名字

所以实际上的打包流程:
一般就是点击 热更新,打包AB+热更dll+上传 或者点击 大版本更新,打包AB+打包程序+上传